---
import {
    Github,
    Twitter,
    Search,
    Menu,
    Sun,
    Moon,
    Command,
} from "lucide-react";

/**
 * Navbar.astro - "Ultra-Modern" Floating Navbar
 * Features:
 * - Glassmorphism floating island design
 * - Scroll-aware shrinking and styling
 * - Smooth active/hover states with glow
 * - Mobile responsive menu
 */
const navLinks = [
    { name: "Docs", href: "/docs" },
    { name: "Blog", href: "/blog" },
];
---

<header
    id="navbar"
    class="fixed top-4 left-0 right-0 z-50 flex justify-center transition-all duration-300 animate-fade-in px-4"
>
    <!-- Navbar Container (Floating Island) -->
    <nav
        class="w-full max-w-[1200px] bg-background/70 backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl shadow-black/50 transition-all duration-300 group hover:border-white/20"
        id="nav-container"
    >
        <div
            class="px-6 h-14 md:h-16 flex items-center justify-between relative overflow-hidden rounded-2xl"
        >
            <!-- Ambient Glow Effect -->
            <div
                class="absolute inset-0 bg-gradient-to-r from-primary/5 via-transparent to-primary/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"
            >
            </div>

            <!-- Left: Logo -->
            <a href="/" class="flex items-center gap-2.5 z-10 group/logo">
                <span
                    class="font-display font-medium text-2xl text-white tracking-wide"
                >
                    Newgate
                </span>
            </a>

            <!-- Center: Navigation Links -->
            <div
                class="hidden md:flex items-center gap-1 bg-white/5 p-1 rounded-full border border-white/5"
            >
                {
                    navLinks.map((link) => (
                        <a
                            href={link.href}
                            class="px-4 py-1.5 text-sm font-medium text-text-secondary hover:text-white rounded-full transition-all duration-200 hover:bg-white/5 relative group/link"
                        >
                            {link.name}
                            {/* Hover Glow */}
                            <span class="absolute inset-0 rounded-full bg-primary/10 opacity-0 scale-90 group-hover/link:opacity-100 group-hover/link:scale-100 transition-all duration-200" />
                        </a>
                    ))
                }
            </div>

            <!-- Right: Utilities -->
            <div class="flex items-center gap-3 md:gap-4 z-10">
                <a
                    href="https://github.com/XplnHUB/newgatejs"
                    target="_blank"
                    class="p-2 text-text-secondary hover:text-white hover:bg-white/5 rounded-full transition-colors"
                >
                    <Github className="w-4 h-4" />
                </a>

                <!-- Mobile Menu Trigger -->
                <button
                    class="md:hidden p-2 text-text-secondary hover:text-white"
                >
                    <Menu className="w-5 h-5" />
                </button>
            </div>
        </div>
    </nav>
</header>

<script is:inline>
    // Scroll-aware navbar logic
    const navbar = document.getElementById("navbar");
    const container = document.getElementById("nav-container");

    window.addEventListener("scroll", () => {
        if (window.scrollY > 20) {
            // Shrink state
            navbar?.classList.remove("top-4");
            navbar?.classList.add("top-2");
            container?.classList.add(
                "backdrop-blur-2xl",
                "bg-background/90",
                "border-primary/20",
                "shadow-glow",
            );
            container?.classList.remove("bg-background/70", "border-white/10");
            // Make container slightly narrower
            container && (container.style.maxWidth = "1000px");
        } else {
            // Reset state
            navbar?.classList.add("top-4");
            navbar?.classList.remove("top-2");
            container?.classList.remove(
                "backdrop-blur-2xl",
                "bg-background/90",
                "border-primary/20",
                "shadow-glow",
            );
            container?.classList.add("bg-background/70", "border-white/10");
            container && (container.style.maxWidth = "1200px");
        }
    });

    // Initial check
    if (window.scrollY > 20) {
        navbar?.classList.remove("top-4");
        navbar?.classList.add("top-2");
        container && (container.style.maxWidth = "1000px");
    }
</script>
