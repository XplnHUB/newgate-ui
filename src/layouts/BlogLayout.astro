---
import Layout from "./Layout.astro";
import Navbar from "../components/Navbar.astro";
import Footer from "../components/Footer.astro";

interface Props {
    title: string;
    description?: string;
    author?: string;
    date?: string;
}

const { title, description, author, date } = Astro.props;
---

<Layout title={`${title} - Newgate Blog`}>
    <div class="bg-brand-mesh fixed inset-0 pointer-events-none z-0"></div>
    <Navbar />

    <div
        class="flex max-w-[1400px] mx-auto min-h-screen pt-24 relative z-10 px-6 lg:px-12"
    >
        <main class="flex-1 min-w-0 max-w-[80ch] mx-auto">
            {/* Header */}
            <div class="mb-12 text-center">
                <h1
                    class="text-4xl md:text-5xl font-heading font-bold text-white mb-6 leading-tight tracking-tight"
                >
                    {title}
                </h1>
                {
                    description && (
                        <p class="text-xl text-text-secondary leading-relaxed mb-6">
                            {description}
                        </p>
                    )
                }

                {
                    (author || date) && (
                        <div class="flex items-center justify-center gap-4 text-sm text-text-tertiary font-mono">
                            {author && <span>By {author}</span>}
                            {date && <span>• {date}</span>}
                        </div>
                    )
                }
            </div>

            <article
                class="prose prose-invert prose-lg w-full
                prose-headings:font-heading prose-headings:font-bold prose-headings:tracking-tight prose-headings:text-white
                prose-h1:text-4xl prose-h1:mb-8 prose-h1:leading-tight
                prose-h2:text-2xl prose-h2:mt-12 prose-h2:mb-6 prose-h2:text-primary/90
                prose-h3:text-xl prose-h3:mt-8 prose-h3:text-white/90
                prose-p:text-text-secondary prose-p:leading-relaxed prose-p:text-lg
                prose-a:text-primary prose-a:no-underline hover:prose-a:text-primary-300 prose-a:transition-colors
                prose-code:text-primary-100 prose-code:bg-surface-highlight prose-code:px-1.5 prose-code:py-0.5 prose-code:rounded-md prose-code:before:content-none prose-code:after:content-none prose-code:font-mono prose-code:text-sm prose-code:border prose-code:border-white/5
                prose-pre:bg-surface prose-pre:border prose-pre:border-border prose-pre:shadow-2xl prose-pre:rounded-xl prose-pre:my-8
                prose-li:text-text-secondary prose-li:marker:text-primary
                prose-blockquote:border-l-primary prose-blockquote:bg-surface-highlight/10 prose-blockquote:py-2 prose-blockquote:px-6 prose-blockquote:rounded-r-lg prose-blockquote:text-text-secondary prose-blockquote:not-italic"
            >
                <slot />
            </article>

            <script
                type="application/ld+json"
                set:html={JSON.stringify({
                    "@context": "https://schema.org",
                    "@type": "TechArticle",
                    headline: title,
                    description: description,
                    image: "https://newgate.xplnhub.tech/social-card.jpg",
                    author: {
                        "@type": "Organization",
                        name: author || "Newgate Team",
                    },
                    publisher: {
                        "@type": "Organization",
                        name: "Newgate",
                        logo: {
                            "@type": "ImageObject",
                            url: "https://newgate.xplnhub.tech/newgate_logo.svg",
                        },
                    },
                    datePublished: date,
                    dateModified: new Date().toISOString(),
                })}
            />

            {/* Back Link */}
            <div
                class="mt-20 pt-10 border-t border-white/5 flex justify-center"
            >
                <a
                    href="/blog"
                    class="text-text-secondary hover:text-white transition-colors flex items-center gap-2"
                >
                    ← Back to Blog
                </a>
            </div>
        </main>
    </div>
    <Footer />
</Layout>
