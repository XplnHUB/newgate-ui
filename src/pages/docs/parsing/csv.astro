---
import DocsLayout from "../../../layouts/DocsLayout.astro";

const headings = [
    { depth: 2, slug: "usage", text: "Usage" },
    { depth: 2, slug: "options", text: "Options" },
];
---

<DocsLayout title="CSV Parsing" headings={headings}>
    <h1 id="csv-parsing">CSV Parsing</h1>

    <p>
        Newgate includes a robust CSV parser that activates when <code
            >Content-Type: text/csv</code
        > is detected.
    </p>

    <h2 id="usage">Usage</h2>

    <pre><code class="language-javascript">app.post('/upload-csv', (req, res) =&gt; &#123;
  // req.body is an array of objects
  const rows = req.body;
  
  rows.forEach(row =&gt; &#123;
    console.log(row);
  &#125;);
  
  res.json(&#123; count: rows.length &#125;);
&#125;);
</code></pre>

    <h2 id="options">Options</h2>

    <p>The CSV parser supports various options for configuration.</p>

    <pre><code class="language-javascript">const options = &#123;
  headers: true,        // Use first row as headers (default: true)
  delimiter: ',',       // Field delimiter (default: ',')
  skipEmptyLines: true, // Skip empty lines (default: true)
  schema: &#123;             // Optional schema validation
    age: (val) =&gt; !isNaN(parseInt(val))
  &#125;
&#125;;
</code></pre>
</DocsLayout>
